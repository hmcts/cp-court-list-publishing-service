# Server, management/actuator, tracing, OTLP and logging
server:
  port: ${SERVER_PORT:8082}
  servlet:
    context-path: /courtlistpublishing-service
  shutdown: graceful
  http2:
    enabled: true
  forward-headers-strategy: framework   # honor X-Forwarded-* behind proxies
  compression:
    enabled: true
    min-response-size: 2KB
    mime-types: "application/json"

management:
  server:
    # Keep actuator on same port by default; override if you want a separate port
    port: ${MANAGEMENT_SERVER_PORT:${SERVER_PORT:8082}}
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health, info, prometheus
  endpoint:
    health:
      probes:
        enabled: true                  # liveness/readiness groups
  metrics:
    tags:
      service: cp-court-list-publishing-service
      cluster: ${CLUSTER_NAME:local}
      region: ${REGION:local}
  tracing:
    enabled: ${OTEL_METRICS_ENABLED:false}
    sampling:
      probability: ${TRACING_SAMPLER_PROBABILITY:1.0}
  otlp:
    tracing:
      enabled: ${OTEL_METRICS_ENABLED:false}
      endpoint: ${OTEL_TRACES_URL:http://localhost:4318/traces}
      export:
        enabled: ${OTEL_METRICS_ENABLED:false}
    metrics:
      export:
        enabled: ${OTEL_METRICS_ENABLED:false}
        url: ${OTEL_METRICS_URL:http://localhost:4318/metrics}

logging:
  level:
    root: INFO
  # Use your JSON config (async) â€” make sure this file exists
  config: classpath:logback.xml

